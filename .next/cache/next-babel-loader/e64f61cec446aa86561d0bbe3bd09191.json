{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Header from '../components/common/Header/Header';\nimport BaseLayout from '../components/layouts/BaseLayout';\nimport BasePage from '../components/common/BasePage/BasePage';\nimport withAuth from '../components/hoc/withAuth';\nimport SlateEditor from '../components/slate-editor/Editor';\nimport DynamicEditor from '../components/slate-editor/DynamicEditor';\nimport RichText from '../components/slate-editor/RichText';\nimport { saveBlog, createBlog } from '../actions';\nimport { Router } from '../routes';\nexport class BlogEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSaving: false,\n      lockId: Math.floor(1000 + Math.random() * 9000)\n    };\n    this.saveBlog = this.saveBlog.bind(this);\n  }\n\n  saveBlog(heading, story) {\n    const {\n      lockId\n    } = this.state;\n    const blog = {};\n    blog.title = heading.title;\n    blog.subTitle = heading.subtitle;\n    blog.story = story;\n    this.setState({\n      isSaving: true\n    });\n    createBlog(blog, lockId).then(createdBlog => {\n      this.setState({\n        isSaving: false\n      });\n      Router.pushRoute(`/blogs/${createdBlog._id}/edit`);\n    }).catch(err => {\n      this.setState({\n        isSaving: false\n      });\n      const message = err.message || 'Server Error!';\n      console.error(message);\n    });\n  }\n\n  render() {\n    const {\n      isSaving\n    } = this.state;\n    return __jsx(\"div\", null, __jsx(BaseLayout, this.props.auth, __jsx(BasePage, {\n      containerClass: \"editor-wrapper\",\n      className: \"blog-editor-page\"\n    }, __jsx(RichText, {\n      save: this.saveBlog,\n      isSaving: isSaving\n    }))));\n  }\n\n}\nexport default withAuth('siteOwner')(BlogEditor);","map":{"version":3,"sources":["E:/Documents/Projects/heroku potfolio test/heroku-test/pages/blogEditor.js"],"names":["React","Component","Header","BaseLayout","BasePage","withAuth","SlateEditor","DynamicEditor","RichText","saveBlog","createBlog","Router","BlogEditor","constructor","props","state","isSaving","lockId","Math","floor","random","bind","heading","story","blog","title","subTitle","subtitle","setState","then","createdBlog","pushRoute","_id","catch","err","message","console","error","render","auth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,QAAP,MAAqB,wCAArB;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,aAAP,MAA2B,0CAA3B;AACA,OAAOC,QAAP,MAAqB,qCAArB;AACA,SAAQC,QAAR,EAAkBC,UAAlB,QAAmC,YAAnC;AAEA,SAASC,MAAT,QAAuB,WAAvB;AAEA,OAAO,MAAMC,UAAN,SAAyBX,SAAzB,CAAmC;AAEtCY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,KADD;AAETC,MAAAA,MAAM,EAAEC,IAAI,CAACC,KAAL,CAAW,OAAOD,IAAI,CAACE,MAAL,KAAgB,IAAlC;AAFC,KAAb;AAIA,SAAKX,QAAL,GAAgB,KAAKA,QAAL,CAAcY,IAAd,CAAmB,IAAnB,CAAhB;AACH;;AAEDZ,EAAAA,QAAQ,CAACa,OAAD,EAAUC,KAAV,EAAiB;AACrB,UAAM;AAAEN,MAAAA;AAAF,QAAa,KAAKF,KAAxB;AACA,UAAMS,IAAI,GAAG,EAAb;AACAA,IAAAA,IAAI,CAACC,KAAL,GAAaH,OAAO,CAACG,KAArB;AACAD,IAAAA,IAAI,CAACE,QAAL,GAAgBJ,OAAO,CAACK,QAAxB;AACAH,IAAAA,IAAI,CAACD,KAAL,GAAaA,KAAb;AAEA,SAAKK,QAAL,CAAc;AAAEZ,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AAEAN,IAAAA,UAAU,CAACc,IAAD,EAAOP,MAAP,CAAV,CAAyBY,IAAzB,CAA+BC,WAAW,IAAI;AAC1C,WAAKF,QAAL,CAAc;AAAEZ,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACAL,MAAAA,MAAM,CAACoB,SAAP,CAAkB,UAASD,WAAW,CAACE,GAAI,OAA3C;AACH,KAHD,EAGGC,KAHH,CAGSC,GAAG,IAAI;AACZ,WAAKN,QAAL,CAAc;AAAEZ,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACA,YAAMmB,OAAO,GAAGD,GAAG,CAACC,OAAJ,IAAc,eAA9B;AACAC,MAAAA,OAAO,CAACC,KAAR,CAAcF,OAAd;AACH,KAPD;AAQH;;AAGDG,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEtB,MAAAA;AAAF,QAAe,KAAKD,KAA1B;AACA,WACI,mBAEI,MAAC,UAAD,EAAgB,KAAKD,KAAL,CAAWyB,IAA3B,EACI,MAAC,QAAD;AAAU,MAAA,cAAc,EAAC,gBAAzB;AAA0C,MAAA,SAAS,EAAC;AAApD,OAEI,MAAC,QAAD;AAAU,MAAA,IAAI,EAAE,KAAK9B,QAArB;AAA+B,MAAA,QAAQ,EAAEO;AAAzC,MAFJ,CADJ,CAFJ,CADJ;AAWH;;AA7CqC;AAgD1C,eAAeX,QAAQ,CAAC,WAAD,CAAR,CAAsBO,UAAtB,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport Header from '../components/common/Header/Header'\r\nimport BaseLayout from '../components/layouts/BaseLayout'\r\nimport BasePage from '../components/common/BasePage/BasePage'\r\n\r\nimport withAuth from '../components/hoc/withAuth'\r\nimport SlateEditor from '../components/slate-editor/Editor'\r\nimport DynamicEditor from  '../components/slate-editor/DynamicEditor'\r\nimport RichText from '../components/slate-editor/RichText'\r\nimport {saveBlog, createBlog} from '../actions'\r\n\r\nimport { Router } from '../routes'\r\n\r\nexport class BlogEditor extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            isSaving: false,\r\n            lockId: Math.floor(1000 + Math.random() * 9000)\r\n        }\r\n        this.saveBlog = this.saveBlog.bind(this)\r\n    }\r\n\r\n    saveBlog(heading, story) {\r\n        const { lockId } = this.state\r\n        const blog = {}\r\n        blog.title = heading.title\r\n        blog.subTitle = heading.subtitle\r\n        blog.story = story\r\n\r\n        this.setState({ isSaving: true })\r\n\r\n        createBlog(blog, lockId).then( createdBlog => {\r\n            this.setState({ isSaving: false })\r\n            Router.pushRoute(`/blogs/${createdBlog._id}/edit`)\r\n        }).catch(err => {\r\n            this.setState({ isSaving: false })\r\n            const message = err.message|| 'Server Error!'\r\n            console.error(message)\r\n        })\r\n    }\r\n    \r\n\r\n    render() {\r\n        const { isSaving } = this.state\r\n        return (\r\n            <div>\r\n            {/* we destructured auth props using this notation and passed it as a props to BaseLayout */}\r\n                <BaseLayout {...this.props.auth}>\r\n                    <BasePage containerClass=\"editor-wrapper\" className=\"blog-editor-page\">\r\n                        {/* <SlateEditor /> */}\r\n                        <RichText save={this.saveBlog} isSaving={isSaving}/>\r\n                    </BasePage>\r\n                </BaseLayout>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withAuth('siteOwner')(BlogEditor)\r\n"]},"metadata":{},"sourceType":"module"}