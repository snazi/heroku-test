{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport { Slate, Editable, ReactEditor, withReact, useSlate } from 'slate-react';\nimport { Editor, Transforms, Text, createEditor } from 'slate';\nimport { css } from 'emotion';\nimport { withHistory } from 'slate-history';\nimport { Button, Icon, Menu, Portal } from './components';\nimport { Range } from 'slate';\n\nconst HoverMenu = () => {\n  const {\n    0: value,\n    1: setValue\n  } = useState(initialValue);\n  const editor = useMemo(() => withHistory(withReact(createEditor())), []);\n  return __jsx(Slate, {\n    editor: editor,\n    value: value,\n    onChange: value => setValue(value)\n  }, __jsx(HoveringToolbar, null), __jsx(Editable, {\n    renderLeaf: props => __jsx(Leaf, props),\n    placeholder: \"Enter some text...\",\n    onDOMBeforeInput: event => {\n      event.preventDefault();\n\n      switch (event.inputType) {\n        case 'formatBold':\n          return toggleFormat(editor, 'bold');\n\n        case 'formatItalic':\n          return toggleFormat(editor, 'italic');\n\n        case 'formatUnderline':\n          return toggleFormat(editor, 'underline');\n      }\n    }\n  }));\n};\n\nconst toggleFormat = (editor, format) => {\n  const isActive = isFormatActive(editor, format);\n  Transforms.setNodes(editor, {\n    [format]: isActive ? null : true\n  }, {\n    match: Text.isText,\n    split: true\n  });\n};\n\nconst isFormatActive = (editor, format) => {\n  const [match] = Editor.nodes(editor, {\n    match: n => n[format] === true,\n    mode: 'all'\n  });\n  return !!match;\n};\n\nconst Leaf = ({\n  attributes,\n  children,\n  leaf\n}) => {\n  if (leaf.bold) {\n    children = __jsx(\"strong\", null, children);\n  }\n\n  if (leaf.italic) {\n    children = __jsx(\"em\", null, children);\n  }\n\n  if (leaf.underlined) {\n    children = __jsx(\"u\", null, children);\n  }\n\n  return __jsx(\"span\", attributes, children);\n};\n\nconst HoveringToolbar = () => {\n  const ref = useRef();\n  const editor = useSlate();\n  useEffect(() => {\n    const el = ref.current;\n    const {\n      selection\n    } = editor;\n\n    if (!el) {\n      return;\n    }\n\n    if (!selection || !ReactEditor.isFocused(editor) || Range.isCollapsed(selection) || Editor.string(editor, selection) === '') {\n      el.removeAttribute('style');\n      return;\n    }\n\n    const domSelection = window.getSelection();\n    const domRange = domSelection.getRangeAt(0);\n    const rect = domRange.getBoundingClientRect();\n    el.style.opacity = 1;\n    el.style.top = `${rect.top + window.pageYOffset - el.offsetHeight}px`;\n    el.style.left = `${rect.left + window.pageXOffset - el.offsetWidth / 2 + rect.width / 2}px`;\n  });\n  return __jsx(Portal, null, __jsx(Menu, {\n    ref: ref,\n    className: css`\n          padding: 8px 7px 6px;\n          position: absolute;\n          z-index: 1;\n          top: -10000px;\n          left: -10000px;\n          margin-top: -6px;\n          opacity: 0;\n          background-color: #222;\n          border-radius: 4px;\n          transition: opacity 0.75s;\n        `\n  }, __jsx(FormatButton, {\n    format: \"bold\",\n    icon: \"format_bold\"\n  }), __jsx(FormatButton, {\n    format: \"italic\",\n    icon: \"format_italic\"\n  }), __jsx(FormatButton, {\n    format: \"underlined\",\n    icon: \"format_underlined\"\n  })));\n};\n\nconst FormatButton = ({\n  format,\n  icon\n}) => {\n  const editor = useSlate();\n  return __jsx(Button, {\n    reversed: true,\n    active: isFormatActive(editor, format),\n    onMouseDown: event => {\n      event.preventDefault();\n      toggleFormat(editor, format);\n    }\n  }, __jsx(Icon, null, icon));\n};\n\nconst initialValue = [{\n  children: [{\n    text: 'This example shows how you can make a hovering menu appear above your content, which you can use to make text '\n  }, {\n    text: 'bold',\n    bold: true\n  }, {\n    text: ', '\n  }, {\n    text: 'italic',\n    italic: true\n  }, {\n    text: ', or anything else you might want to do!'\n  }]\n}, {\n  children: [{\n    text: 'Try it out yourself! Just '\n  }, {\n    text: 'select any piece of text and the menu will appear',\n    bold: true\n  }, {\n    text: '.'\n  }]\n}];\nexport default HoverMenu;","map":{"version":3,"sources":["E:/Documents/Projects/heroku potfolio test/heroku-test/components/slate-editor/HoverMenu.js"],"names":["React","useState","useMemo","useRef","useEffect","Slate","Editable","ReactEditor","withReact","useSlate","Editor","Transforms","Text","createEditor","css","withHistory","Button","Icon","Menu","Portal","Range","HoverMenu","value","setValue","initialValue","editor","props","event","preventDefault","inputType","toggleFormat","format","isActive","isFormatActive","setNodes","match","isText","split","nodes","n","mode","Leaf","attributes","children","leaf","bold","italic","underlined","HoveringToolbar","ref","el","current","selection","isFocused","isCollapsed","string","removeAttribute","domSelection","window","getSelection","domRange","getRangeAt","rect","getBoundingClientRect","style","opacity","top","pageYOffset","offsetHeight","left","pageXOffset","offsetWidth","width","FormatButton","icon","text"],"mappings":"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","sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react'\r\nimport { Slate, Editable, ReactEditor, withReact, useSlate } from 'slate-react'\r\nimport { Editor, Transforms, Text, createEditor } from 'slate'\r\nimport { css } from 'emotion'\r\nimport { withHistory } from 'slate-history'\r\n\r\nimport { Button, Icon, Menu, Portal } from './components'\r\nimport { Range } from 'slate'\r\n\r\nconst HoverMenu = () => {\r\n  const [value, setValue] = useState(initialValue)\r\n  const editor = useMemo(() => withHistory(withReact(createEditor())), [])\r\n\r\n  return (\r\n    <Slate editor={editor} value={value} onChange={value => setValue(value)}>\r\n      <HoveringToolbar />\r\n      <Editable\r\n        renderLeaf={props => <Leaf {...props} />}\r\n        placeholder=\"Enter some text...\"\r\n        onDOMBeforeInput={event => {\r\n          event.preventDefault()\r\n          switch (event.inputType) {\r\n            case 'formatBold':\r\n              return toggleFormat(editor, 'bold')\r\n            case 'formatItalic':\r\n              return toggleFormat(editor, 'italic')\r\n            case 'formatUnderline':\r\n              return toggleFormat(editor, 'underline')\r\n          }\r\n        }}\r\n      />\r\n    </Slate>\r\n  )\r\n}\r\n\r\nconst toggleFormat = (editor, format) => {\r\n  const isActive = isFormatActive(editor, format)\r\n  Transforms.setNodes(\r\n    editor,\r\n    { [format]: isActive ? null : true },\r\n    { match: Text.isText, split: true }\r\n  )\r\n}\r\n\r\nconst isFormatActive = (editor, format) => {\r\n  const [match] = Editor.nodes(editor, {\r\n    match: n => n[format] === true,\r\n    mode: 'all',\r\n  })\r\n  return !!match\r\n}\r\n\r\nconst Leaf = ({ attributes, children, leaf }) => {\r\n  if (leaf.bold) {\r\n    children = <strong>{children}</strong>\r\n  }\r\n\r\n  if (leaf.italic) {\r\n    children = <em>{children}</em>\r\n  }\r\n\r\n  if (leaf.underlined) {\r\n    children = <u>{children}</u>\r\n  }\r\n\r\n  return <span {...attributes}>{children}</span>\r\n}\r\n\r\nconst HoveringToolbar = () => {\r\n  const ref = useRef()\r\n  const editor = useSlate()\r\n\r\n  useEffect(() => {\r\n    const el = ref.current\r\n    const { selection } = editor\r\n\r\n    if (!el) {\r\n      return\r\n    }\r\n\r\n    if (\r\n      !selection ||\r\n      !ReactEditor.isFocused(editor) ||\r\n      Range.isCollapsed(selection) ||\r\n      Editor.string(editor, selection) === ''\r\n    ) {\r\n      el.removeAttribute('style')\r\n      return\r\n    }\r\n\r\n    const domSelection = window.getSelection()\r\n    const domRange = domSelection.getRangeAt(0)\r\n    const rect = domRange.getBoundingClientRect()\r\n    el.style.opacity = 1\r\n    el.style.top = `${rect.top + window.pageYOffset - el.offsetHeight}px`\r\n    el.style.left = `${rect.left +\r\n      window.pageXOffset -\r\n      el.offsetWidth / 2 +\r\n      rect.width / 2}px`\r\n  })\r\n\r\n  return (\r\n    <Portal>\r\n      <Menu\r\n        ref={ref}\r\n        className={css`\r\n          padding: 8px 7px 6px;\r\n          position: absolute;\r\n          z-index: 1;\r\n          top: -10000px;\r\n          left: -10000px;\r\n          margin-top: -6px;\r\n          opacity: 0;\r\n          background-color: #222;\r\n          border-radius: 4px;\r\n          transition: opacity 0.75s;\r\n        `}\r\n      >\r\n        <FormatButton format=\"bold\" icon=\"format_bold\" />\r\n        <FormatButton format=\"italic\" icon=\"format_italic\" />\r\n        <FormatButton format=\"underlined\" icon=\"format_underlined\" />\r\n      </Menu>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst FormatButton = ({ format, icon }) => {\r\n  const editor = useSlate()\r\n  return (\r\n    <Button\r\n      reversed\r\n      active={isFormatActive(editor, format)}\r\n      onMouseDown={event => {\r\n        event.preventDefault()\r\n        toggleFormat(editor, format)\r\n      }}\r\n    >\r\n      <Icon>{icon}</Icon>\r\n    </Button>\r\n  )\r\n}\r\n\r\nconst initialValue = [\r\n  {\r\n    children: [\r\n      {\r\n        text:\r\n          'This example shows how you can make a hovering menu appear above your content, which you can use to make text ',\r\n      },\r\n      { text: 'bold', bold: true },\r\n      { text: ', ' },\r\n      { text: 'italic', italic: true },\r\n      { text: ', or anything else you might want to do!' },\r\n    ],\r\n  },\r\n  {\r\n    children: [\r\n      { text: 'Try it out yourself! Just ' },\r\n      { text: 'select any piece of text and the menu will appear', bold: true },\r\n      { text: '.' },\r\n    ],\r\n  },\r\n]\r\n\r\nexport default HoverMenu"]},"metadata":{},"sourceType":"module"}