{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Header from '../components/common/Header/Header';\nimport BaseLayout from '../components/layouts/BaseLayout';\nimport axios from 'axios'; // this link comes from routes.js\n\nimport { Link } from '../routes';\nimport BasePage from '../components/common/BasePage/BasePage'; // reacttrap imports for the card\n\nimport { Col, Row, Button } from 'reactstrap';\nimport PortfolioCard from '../components/portfolios/PortfolioCard';\nimport { getPortfolios, deletePortfolio as _deletePortfolio } from '../actions';\nimport { Router } from '../routes';\nexport var Portfolios2 =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Portfolios2, _Component);\n\n  function Portfolios2() {\n    _classCallCheck(this, Portfolios2);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Portfolios2).apply(this, arguments));\n  }\n\n  _createClass(Portfolios2, [{\n    key: \"navigateToEdit\",\n    value: function navigateToEdit(portfolioId, e) {\n      e.stopPropagation();\n      Router.pushRoute(\"/portfolios/\".concat(portfolioId, \"/edit\"));\n    }\n  }, {\n    key: \"displayDeleteWarning\",\n    value: function displayDeleteWarning(portfolioId, e) {\n      e.stopPropagation();\n      var isConfirmed = confirm('Are you sure you want to delete?');\n\n      if (isConfirmed) {\n        this.deletePortfolio(portfolioId);\n      }\n    }\n  }, {\n    key: \"deletePortfolio\",\n    value: function deletePortfolio(portfolioId) {\n      _deletePortfolio(portfolioId).then(function () {\n        Router.pushRoute('/portfolios');\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    }\n  }, {\n    key: \"renderPortfolios\",\n    value: function renderPortfolios(portfolios) {\n      var _this = this;\n\n      var _this$props$auth = this.props.auth,\n          isAuthenticated = _this$props$auth.isAuthenticated,\n          isSiteOwner = _this$props$auth.isSiteOwner;\n      return portfolios.map(function (portfolio, index) {\n        return __jsx(Col, {\n          key: index,\n          md: \"4\"\n        }, __jsx(PortfolioCard, {\n          portfolio: portfolio\n        }, isAuthenticated && isSiteOwner && __jsx(React.Fragment, null, __jsx(Button, {\n          onClick: function onClick(e) {\n            e.stopPropagation();\n\n            _this.navigateToEdit(portfolio._id, e);\n          },\n          color: \"warning\"\n        }, \"Edit\"), ' ', __jsx(Button, {\n          onClick: function onClick(e) {\n            e.stopPropagation();\n\n            _this.displayDeleteWarning(portfolio._id, e);\n          },\n          color: \"danger\"\n        }, \"Delete\"))));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var portfolios = this.props.portfolios;\n      var _this$props$auth2 = this.props.auth,\n          isAuthenticated = _this$props$auth2.isAuthenticated,\n          isSiteOwner = _this$props$auth2.isSiteOwner;\n      return __jsx(\"div\", null, __jsx(BaseLayout, _extends({\n        cannonical: \"/portfolios\",\n        title: \"Angelo Amadora - Learn about my Career\"\n      }, this.props.auth), __jsx(BasePage, {\n        className: \"portfolio-page\",\n        title: \"Portfolios\"\n      }, isAuthenticated && isSiteOwner && __jsx(Button, {\n        onClick: function onClick() {\n          return Router.pushRoute('/portfolios/new');\n        },\n        color: \"success\",\n        className: \"create-port-btn\"\n      }, \"Create Portfolio\"), __jsx(Row, null, this.renderPortfolios(portfolios)))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps() {\n      var portfolios;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              portfolios = [];\n              _context.prev = 1;\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(getPortfolios());\n\n            case 4:\n              portfolios = _context.sent;\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n\n            case 10:\n              return _context.abrupt(\"return\", {\n                portfolios: portfolios\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[1, 7]]);\n    }\n  }]);\n\n  return Portfolios2;\n}(Component);\nexport default Portfolios2;","map":null,"metadata":{},"sourceType":"module"}