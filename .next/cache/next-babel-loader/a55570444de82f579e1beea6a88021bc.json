{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _Array$from from \"@babel/runtime-corejs2/core-js/array/from\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport isHotkey from 'is-hotkey';\nimport { Editable, withReact, useSlate, Slate } from 'slate-react';\nimport { Editor, Transforms, createEditor, Node, Text } from 'slate';\nimport { withHistory } from 'slate-history';\nimport ControllMenu from './ControllMenu';\nimport escapeHtml from 'escape-html';\nimport { jsx } from 'slate-hyperscript';\nimport { Button, Icon, Toolbar } from './components';\nvar HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline',\n  'mod+`': 'code'\n};\nvar LIST_TYPES = ['numbered-list', 'bulleted-list'];\n\nvar serialize = function serialize(node) {\n  if (Text.isText(node)) {\n    return escapeHtml(node.text);\n  }\n\n  var children = node.children.map(function (n) {\n    return serialize(n);\n  }).join('');\n\n  switch (node.type) {\n    case 'block-quote':\n      return \"<blockquote><p>\".concat(children, \"</p></blockquote>\");\n\n    case 'paragraph':\n      return \"<p>\".concat(children, \"</p>\");\n\n    case 'link':\n      return \"<a href=\\\"\".concat(escapeHtml(node.url), \"\\\">\").concat(children, \"</a>\");\n\n    case 'code':\n      return \"ahahahah tangina\";\n\n    default:\n      return children;\n  }\n};\n\nvar deserialize = function deserialize(el) {\n  if (el.nodeType === 3) {\n    return el.textContent;\n  } else if (el.nodeType !== 1) {\n    return null;\n  }\n\n  var children = _Array$from(el.childNodes).map(deserialize);\n\n  switch (el.nodeName) {\n    case 'BODY':\n      return jsx('fragment', {}, children);\n\n    case 'BR':\n      return '\\n';\n\n    case 'BLOCKQUOTE':\n      return jsx('element', {\n        type: 'quote'\n      }, children);\n\n    case 'P':\n      return jsx('element', {\n        type: 'paragraph'\n      }, children);\n\n    case 'A':\n      return jsx('element', {\n        type: 'link',\n        url: el.getAttribute('href')\n      }, children);\n\n    default:\n      return el.textContent;\n  }\n};\n\nvar initializeEditorWithProps = function initializeEditorWithProps(props, setValue) {\n  useEffect(function () {\n    var document = new DOMParser().parseFromString(props.initialValue, 'text/html');\n\n    var _final = deserialize(document.body);\n\n    setValue(_final);\n  }, []);\n};\n\nvar getTitle = function getTitle(value) {\n  var firstBlock = serialize(value.children[0]);\n  var secondBlock = value.children[1] ? serialize(value.children[1]) : null;\n  console.log(firstBlock);\n  var title = firstBlock ? firstBlock : 'No Title';\n  var subtitle = secondBlock ? secondBlock : 'No Subtitle';\n  return {\n    title: title,\n    subtitle: subtitle\n  };\n};\n\nvar _save = function save(props, value) {\n  var headingValues = getTitle(value);\n  var text = serialize(value);\n  console.log(headingValues);\n  !props.isSaving && props.save(headingValues, text);\n};\n\nvar RichText = function RichText(props) {\n  var _useState = useState(initialValue),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  if (props.initialValue) useEffect(function () {\n    var document = new DOMParser().parseFromString(props.initialValue, 'text/html');\n\n    var _final2 = deserialize(document.body);\n\n    setValue(_final2);\n  }, []);\n  var renderElement = useCallback(function (props) {\n    return __jsx(Element, props);\n  }, []);\n  var renderLeaf = useCallback(function (props) {\n    return __jsx(Leaf, props);\n  }, []);\n  var editor = useMemo(function () {\n    return withHistory(withReact(createEditor()));\n  }, []);\n  var isSaving = props.isSaving;\n  return __jsx(React.Fragment, null, __jsx(ControllMenu, {\n    isSaving: isSaving,\n    save: function save() {\n      return _save(props, editor);\n    }\n  }), __jsx(Slate, {\n    editor: editor,\n    value: value,\n    onChange: function onChange(value) {\n      return setValue(value);\n    }\n  }, __jsx(Toolbar, null, __jsx(MarkButton, {\n    format: \"bold\",\n    icon: \"format_bold\"\n  }), __jsx(MarkButton, {\n    format: \"italic\",\n    icon: \"format_italic\"\n  }), __jsx(MarkButton, {\n    format: \"underline\",\n    icon: \"format_underlined\"\n  }), __jsx(MarkButton, {\n    format: \"code\",\n    icon: \"code\"\n  }), __jsx(BlockButton, {\n    format: \"heading-one\",\n    icon: \"looks_one\"\n  }), __jsx(BlockButton, {\n    format: \"heading-two\",\n    icon: \"looks_two\"\n  }), __jsx(BlockButton, {\n    format: \"block-quote\",\n    icon: \"format_quote\"\n  }), __jsx(BlockButton, {\n    format: \"numbered-list\",\n    icon: \"format_list_numbered\"\n  }), __jsx(BlockButton, {\n    format: \"bulleted-list\",\n    icon: \"format_list_bulleted\"\n  })), __jsx(Editable, {\n    renderElement: renderElement,\n    renderLeaf: renderLeaf,\n    placeholder: \"Enter some rich text\\u2026\",\n    spellCheck: true,\n    autoFocus: true,\n    onKeyDown: function onKeyDown(event) {\n      for (var hotkey in HOTKEYS) {\n        if (isHotkey(hotkey, event)) {\n          event.preventDefault();\n          var mark = HOTKEYS[hotkey];\n          toggleMark(editor, mark);\n        }\n      }\n    }\n  })));\n};\n\nvar toggleBlock = function toggleBlock(editor, format) {\n  var isActive = isBlockActive(editor, format);\n  var isList = LIST_TYPES.includes(format);\n  Transforms.unwrapNodes(editor, {\n    match: function match(n) {\n      return LIST_TYPES.includes(n.type);\n    },\n    split: true\n  });\n  Transforms.setNodes(editor, {\n    type: isActive ? 'paragraph' : isList ? 'list-item' : format\n  });\n\n  if (!isActive && isList) {\n    var block = {\n      type: format,\n      children: []\n    };\n    Transforms.wrapNodes(editor, block);\n  }\n};\n\nvar toggleMark = function toggleMark(editor, format) {\n  var isActive = isMarkActive(editor, format);\n\n  if (isActive) {\n    Editor.removeMark(editor, format);\n  } else {\n    Editor.addMark(editor, format, true);\n  }\n};\n\nvar isBlockActive = function isBlockActive(editor, format) {\n  var _Editor$nodes = Editor.nodes(editor, {\n    match: function match(n) {\n      return n.type === format;\n    }\n  }),\n      _Editor$nodes2 = _slicedToArray(_Editor$nodes, 1),\n      match = _Editor$nodes2[0];\n\n  return !!match;\n};\n\nvar isMarkActive = function isMarkActive(editor, format) {\n  var marks = Editor.marks(editor);\n  return marks ? marks[format] === true : false;\n};\n\nvar Element = function Element(_ref) {\n  var attributes = _ref.attributes,\n      children = _ref.children,\n      element = _ref.element;\n\n  switch (element.type) {\n    case 'block-quote':\n      return __jsx(\"blockquote\", attributes, children);\n\n    case 'bulleted-list':\n      return __jsx(\"ul\", attributes, children);\n\n    case 'heading-one':\n      return __jsx(\"h1\", attributes, children);\n\n    case 'heading-two':\n      return __jsx(\"h2\", attributes, children);\n\n    case 'list-item':\n      return __jsx(\"li\", attributes, children);\n\n    case 'numbered-list':\n      return __jsx(\"ol\", attributes, children);\n\n    default:\n      return __jsx(\"p\", attributes, children);\n  }\n};\n\nvar Leaf = function Leaf(_ref2) {\n  var attributes = _ref2.attributes,\n      children = _ref2.children,\n      leaf = _ref2.leaf;\n\n  if (leaf.bold) {\n    children = __jsx(\"strong\", null, children);\n  }\n\n  if (leaf.code) {\n    children = __jsx(\"code\", null, children);\n  }\n\n  if (leaf.italic) {\n    children = __jsx(\"em\", null, children);\n  }\n\n  if (leaf.underline) {\n    children = __jsx(\"u\", null, children);\n  }\n\n  return __jsx(\"span\", attributes, children);\n};\n\nvar BlockButton = function BlockButton(_ref3) {\n  var format = _ref3.format,\n      icon = _ref3.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isBlockActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleBlock(editor, format);\n    }\n  }, __jsx(Icon, null, icon));\n};\n\nvar MarkButton = function MarkButton(_ref4) {\n  var format = _ref4.format,\n      icon = _ref4.icon;\n  var editor = useSlate();\n  return __jsx(Button, {\n    active: isMarkActive(editor, format),\n    onMouseDown: function onMouseDown(event) {\n      event.preventDefault();\n      toggleMark(editor, format);\n    }\n  }, __jsx(Icon, null, icon));\n};\n\nvar initialValue = [{\n  type: 'paragraph',\n  children: [{\n    text: 'This is editable '\n  }, {\n    text: 'rich',\n    bold: true\n  }, {\n    text: ' text, '\n  }, {\n    text: 'much',\n    italic: true\n  }, {\n    text: ' better than a '\n  }, {\n    text: '<textarea>',\n    code: true\n  }, {\n    text: '!'\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: \"Since it's rich text, you can do things like turn a selection of text \"\n  }, {\n    text: 'bold',\n    bold: true\n  }, {\n    text: ', or add a semantically rendered block quote in the middle of the page, like this:'\n  }]\n}, {\n  type: 'block-quote',\n  children: [{\n    text: 'A wise quote.'\n  }]\n}, {\n  type: 'paragraph',\n  children: [{\n    text: 'Try it out for yourself!'\n  }]\n}];\nexport default RichText;","map":{"version":3,"sources":["E:/Documents/Projects/heroku potfolio test/heroku-test/components/slate-editor/RichText.js"],"names":["React","useCallback","useMemo","useState","useEffect","isHotkey","Editable","withReact","useSlate","Slate","Editor","Transforms","createEditor","Node","Text","withHistory","ControllMenu","escapeHtml","jsx","Button","Icon","Toolbar","HOTKEYS","LIST_TYPES","serialize","node","isText","text","children","map","n","join","type","url","deserialize","el","nodeType","textContent","childNodes","nodeName","getAttribute","initializeEditorWithProps","props","setValue","document","DOMParser","parseFromString","initialValue","final","body","getTitle","value","firstBlock","secondBlock","console","log","title","subtitle","save","headingValues","isSaving","RichText","renderElement","renderLeaf","editor","event","hotkey","preventDefault","mark","toggleMark","toggleBlock","format","isActive","isBlockActive","isList","includes","unwrapNodes","match","split","setNodes","block","wrapNodes","isMarkActive","removeMark","addMark","nodes","marks","Element","attributes","element","Leaf","leaf","bold","code","italic","underline","BlockButton","icon","MarkButton"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState, useEffect  } from 'react'\r\nimport isHotkey from 'is-hotkey'\r\nimport { Editable, withReact, useSlate, Slate } from 'slate-react'\r\nimport { Editor, Transforms, createEditor, Node, Text } from 'slate'\r\nimport { withHistory } from 'slate-history'\r\nimport ControllMenu from './ControllMenu'\r\nimport escapeHtml from 'escape-html'\r\nimport { jsx } from 'slate-hyperscript'\r\n\r\n\r\nimport { Button, Icon, Toolbar } from './components'\r\n\r\nconst HOTKEYS = {\r\n  'mod+b': 'bold',\r\n  'mod+i': 'italic',\r\n  'mod+u': 'underline',\r\n  'mod+`': 'code',\r\n}\r\n\r\nconst LIST_TYPES = ['numbered-list', 'bulleted-list']\r\n\r\nconst serialize = node => {\r\n  if (Text.isText(node)) {\r\n    return escapeHtml(node.text)\r\n  }\r\n\r\n  const children = node.children.map(n => serialize(n)).join('')\r\n\r\n  switch (node.type) {\r\n    case 'block-quote':\r\n      return `<blockquote><p>${children}</p></blockquote>`\r\n    case 'paragraph':\r\n      return `<p>${children}</p>`\r\n    case 'link':\r\n      return `<a href=\"${escapeHtml(node.url)}\">${children}</a>`\r\n    case 'code':\r\n      return `ahahahah tangina`\r\n    default:\r\n      return children\r\n  }\r\n}\r\n\r\nconst deserialize = el => {\r\n \r\n  if (el.nodeType === 3) {\r\n    return el.textContent\r\n  } else if (el.nodeType !== 1) {\r\n    return null\r\n  }\r\n  \r\n  const children = Array.from(el.childNodes).map(deserialize)\r\n\r\n  switch (el.nodeName) {\r\n    case 'BODY':\r\n      return jsx('fragment', {}, children)\r\n    case 'BR':\r\n      return '\\n'\r\n    case 'BLOCKQUOTE':\r\n      return jsx('element', { type: 'quote' }, children)\r\n    case 'P':\r\n      return jsx('element', { type: 'paragraph' }, children)\r\n    case 'A':\r\n      return jsx(\r\n        'element',\r\n        { type: 'link', url: el.getAttribute('href') },\r\n        children\r\n      )\r\n    default:\r\n      return el.textContent\r\n  }\r\n}\r\n\r\nconst initializeEditorWithProps = (props, setValue) => {\r\n\r\n  useEffect(() => {\r\n    const document = new DOMParser().parseFromString(props.initialValue, 'text/html')\r\n    const final = deserialize(document.body)\r\n    setValue(final)\r\n  },[])\r\n  \r\n}\r\nconst getTitle = (value) => {\r\n\r\n  const firstBlock = serialize(value.children[0])\r\n  const secondBlock = value.children[1] ? serialize(value.children[1]) : null\r\n  console.log(firstBlock)\r\n  const title = firstBlock ? firstBlock : 'No Title'\r\n  const subtitle = secondBlock ? secondBlock : 'No Subtitle'\r\n  return {\r\n    title,\r\n    subtitle\r\n  }\r\n}\r\n\r\n\r\n\r\nconst save = (props,value)=> {\r\n\r\n  const headingValues = getTitle(value)\r\n  const text = serialize(value)\r\n  console.log(headingValues)\r\n\r\n  !props.isSaving && props.save(headingValues, text)\r\n\r\n}\r\n\r\nconst RichText = (props) => {\r\n  \r\n  const [value, setValue] = useState(initialValue)\r\n\r\n  if(props.initialValue)\r\n    useEffect(() => {\r\n      const document = new DOMParser().parseFromString(props.initialValue, 'text/html')\r\n      const final = deserialize(document.body)\r\n      setValue(final)\r\n    },[])\r\n  \r\n  const renderElement = useCallback(props => <Element {...props} />, [])\r\n  const renderLeaf = useCallback(props => <Leaf {...props} />, [])\r\n  const editor = useMemo(() => withHistory(withReact(createEditor())), [])\r\n\r\n  const {isSaving} = props\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ControllMenu isSaving={isSaving} save={() => save(props, editor)}></ControllMenu>\r\n      <Slate editor={editor} value={value} onChange={value => setValue(value)}>\r\n        <Toolbar>\r\n          <MarkButton format=\"bold\" icon=\"format_bold\" />\r\n          <MarkButton format=\"italic\" icon=\"format_italic\" />\r\n          <MarkButton format=\"underline\" icon=\"format_underlined\" />\r\n          <MarkButton format=\"code\" icon=\"code\" />\r\n          <BlockButton format=\"heading-one\" icon=\"looks_one\" />\r\n          <BlockButton format=\"heading-two\" icon=\"looks_two\" />\r\n          <BlockButton format=\"block-quote\" icon=\"format_quote\" />\r\n          <BlockButton format=\"numbered-list\" icon=\"format_list_numbered\" />\r\n          <BlockButton format=\"bulleted-list\" icon=\"format_list_bulleted\" />\r\n        </Toolbar>\r\n        <Editable\r\n          renderElement={renderElement}\r\n          renderLeaf={renderLeaf}\r\n          placeholder=\"Enter some rich text…\"\r\n          spellCheck\r\n          autoFocus\r\n          onKeyDown={event => {\r\n            for (const hotkey in HOTKEYS) {\r\n              if (isHotkey(hotkey, event)) {\r\n                event.preventDefault()\r\n                const mark = HOTKEYS[hotkey]\r\n                toggleMark(editor, mark)\r\n              }\r\n            }\r\n          }}\r\n        />\r\n      </Slate>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst toggleBlock = (editor, format) => {\r\n  const isActive = isBlockActive(editor, format)\r\n  const isList = LIST_TYPES.includes(format)\r\n\r\n  Transforms.unwrapNodes(editor, {\r\n    match: n => LIST_TYPES.includes(n.type),\r\n    split: true,\r\n  })\r\n\r\n  Transforms.setNodes(editor, {\r\n    type: isActive ? 'paragraph' : isList ? 'list-item' : format,\r\n  })\r\n\r\n  if (!isActive && isList) {\r\n    const block = { type: format, children: [] }\r\n    Transforms.wrapNodes(editor, block)\r\n  }\r\n}\r\n\r\nconst toggleMark = (editor, format) => {\r\n  const isActive = isMarkActive(editor, format)\r\n\r\n  if (isActive) {\r\n    Editor.removeMark(editor, format)\r\n  } else {\r\n    Editor.addMark(editor, format, true)\r\n  }\r\n}\r\n\r\nconst isBlockActive = (editor, format) => {\r\n  const [match] = Editor.nodes(editor, {\r\n    match: n => n.type === format,\r\n  })\r\n\r\n  return !!match\r\n}\r\n\r\nconst isMarkActive = (editor, format) => {\r\n  const marks = Editor.marks(editor)\r\n  return marks ? marks[format] === true : false\r\n}\r\n\r\nconst Element = ({ attributes, children, element }) => {\r\n  switch (element.type) {\r\n    case 'block-quote':\r\n      return <blockquote {...attributes}>{children}</blockquote>\r\n    case 'bulleted-list':\r\n      return <ul {...attributes}>{children}</ul>\r\n    case 'heading-one':\r\n      return <h1 {...attributes}>{children}</h1>\r\n    case 'heading-two':\r\n      return <h2 {...attributes}>{children}</h2>\r\n    case 'list-item':\r\n      return <li {...attributes}>{children}</li>\r\n    case 'numbered-list':\r\n      return <ol {...attributes}>{children}</ol>\r\n    default:\r\n      return <p {...attributes}>{children}</p>\r\n  }\r\n}\r\n\r\nconst Leaf = ({ attributes, children, leaf }) => {\r\n  if (leaf.bold) {\r\n    children = <strong>{children}</strong>\r\n  }\r\n\r\n  if (leaf.code) {\r\n    children = <code>{children}</code>\r\n  }\r\n\r\n  if (leaf.italic) {\r\n    children = <em>{children}</em>\r\n  }\r\n\r\n  if (leaf.underline) {\r\n    children = <u>{children}</u>\r\n  }\r\n\r\n  return <span {...attributes}>{children}</span>\r\n}\r\n\r\nconst BlockButton = ({ format, icon }) => {\r\n  const editor = useSlate()\r\n  return (\r\n    <Button\r\n      active={isBlockActive(editor, format)}\r\n      onMouseDown={event => {\r\n        event.preventDefault()\r\n        toggleBlock(editor, format)\r\n      }}\r\n    >\r\n      <Icon>{icon}</Icon>\r\n    </Button>\r\n  )\r\n}\r\n\r\nconst MarkButton = ({ format, icon }) => {\r\n  const editor = useSlate()\r\n  return (\r\n    <Button\r\n      active={isMarkActive(editor, format)}\r\n      onMouseDown={event => {\r\n        event.preventDefault()\r\n        toggleMark(editor, format)\r\n      }}\r\n    >\r\n      <Icon>{icon}</Icon>\r\n    </Button>\r\n  )\r\n}\r\n\r\nconst initialValue = [\r\n  \r\n  {\r\n    type: 'paragraph',\r\n    children: [\r\n      { text: 'This is editable ' },\r\n      { text: 'rich', bold: true },\r\n      { text: ' text, ' },\r\n      { text: 'much', italic: true },\r\n      { text: ' better than a ' },\r\n      { text: '<textarea>', code: true },\r\n      { text: '!' },\r\n    ],\r\n  },\r\n  {\r\n    type: 'paragraph',\r\n    children: [\r\n      {\r\n        text:\r\n          \"Since it's rich text, you can do things like turn a selection of text \",\r\n      },\r\n      { text: 'bold', bold: true },\r\n      {\r\n        text:\r\n          ', or add a semantically rendered block quote in the middle of the page, like this:',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    type: 'block-quote',\r\n    children: [{ text: 'A wise quote.' }],\r\n  },\r\n  {\r\n    type: 'paragraph',\r\n    children: [{ text: 'Try it out for yourself!' }],\r\n  },\r\n]\r\n\r\nexport default RichText"]},"metadata":{},"sourceType":"module"}