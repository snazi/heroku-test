{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Header from '../components/common/Header/Header';\nimport BaseLayout from '../components/layouts/BaseLayout';\nimport BasePage from '../components/common/BasePage/BasePage';\nimport withAuth from '../components/hoc/withAuth';\nimport SlateEditor from '../components/slate-editor/Editor';\nimport DynamicEditor from '../components/slate-editor/DynamicEditor';\nimport RichText from '../components/slate-editor/RichText';\nimport { saveBlog, createBlog } from '../actions';\nimport { Router } from '../routes';\nexport var BlogEditor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BlogEditor, _Component);\n\n  function BlogEditor(props) {\n    var _this;\n\n    _classCallCheck(this, BlogEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BlogEditor).call(this, props));\n    _this.state = {\n      isSaving: false,\n      lockId: Math.floor(1000 + Math.random() * 9000)\n    };\n    _this.saveBlog = _this.saveBlog.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BlogEditor, [{\n    key: \"saveBlog\",\n    value: function saveBlog(heading, story) {\n      var _this2 = this;\n\n      var lockId = this.state.lockId;\n      var blog = {};\n      blog.title = heading.title;\n      blog.subTitle = heading.subtitle;\n      blog.story = story;\n      this.setState({\n        isSaving: true\n      });\n      createBlog(blog, lockId).then(function (createdBlog) {\n        _this2.setState({\n          isSaving: false\n        });\n\n        Router.pushRoute(\"/blogs/\".concat(createdBlog._id, \"/edit\"));\n      })[\"catch\"](function (err) {\n        _this2.setState({\n          isSaving: false\n        });\n\n        var message = err.message || 'Server Error!';\n        console.error(message);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isSaving = this.state.isSaving;\n      return __jsx(\"div\", null, __jsx(BaseLayout, this.props.auth, __jsx(BasePage, {\n        containerClass: \"editor-wrapper\",\n        className: \"blog-editor-page\"\n      }, __jsx(RichText, {\n        save: this.saveBlog,\n        isSaving: isSaving\n      }))));\n    }\n  }]);\n\n  return BlogEditor;\n}(Component);\nexport default withAuth('siteOwner')(BlogEditor);","map":{"version":3,"sources":["E:/Documents/Projects/heroku potfolio test/heroku-test/pages/blogEditor.js"],"names":["React","Component","Header","BaseLayout","BasePage","withAuth","SlateEditor","DynamicEditor","RichText","saveBlog","createBlog","Router","BlogEditor","props","state","isSaving","lockId","Math","floor","random","bind","heading","story","blog","title","subTitle","subtitle","setState","then","createdBlog","pushRoute","_id","err","message","console","error","auth"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,oCAAnB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,QAAP,MAAqB,wCAArB;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,aAAP,MAA2B,0CAA3B;AACA,OAAOC,QAAP,MAAqB,qCAArB;AACA,SAAQC,QAAR,EAAkBC,UAAlB,QAAmC,YAAnC;AAEA,SAASC,MAAT,QAAuB,WAAvB;AAEA,WAAaC,UAAb;AAAA;AAAA;AAAA;;AAEI,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,oFAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,KADD;AAETC,MAAAA,MAAM,EAAEC,IAAI,CAACC,KAAL,CAAW,OAAOD,IAAI,CAACE,MAAL,KAAgB,IAAlC;AAFC,KAAb;AAIA,UAAKV,QAAL,GAAgB,MAAKA,QAAL,CAAcW,IAAd,+BAAhB;AAPe;AAQlB;;AAVL;AAAA;AAAA,6BAYaC,OAZb,EAYsBC,KAZtB,EAY6B;AAAA;;AAAA,UACbN,MADa,GACF,KAAKF,KADH,CACbE,MADa;AAErB,UAAMO,IAAI,GAAG,EAAb;AACAA,MAAAA,IAAI,CAACC,KAAL,GAAaH,OAAO,CAACG,KAArB;AACAD,MAAAA,IAAI,CAACE,QAAL,GAAgBJ,OAAO,CAACK,QAAxB;AACAH,MAAAA,IAAI,CAACD,KAAL,GAAaA,KAAb;AAEA,WAAKK,QAAL,CAAc;AAAEZ,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AAEAL,MAAAA,UAAU,CAACa,IAAD,EAAOP,MAAP,CAAV,CAAyBY,IAAzB,CAA+B,UAAAC,WAAW,EAAI;AAC1C,QAAA,MAAI,CAACF,QAAL,CAAc;AAAEZ,UAAAA,QAAQ,EAAE;AAAZ,SAAd;;AACAJ,QAAAA,MAAM,CAACmB,SAAP,kBAA2BD,WAAW,CAACE,GAAvC;AACH,OAHD,WAGS,UAAAC,GAAG,EAAI;AACZ,QAAA,MAAI,CAACL,QAAL,CAAc;AAAEZ,UAAAA,QAAQ,EAAE;AAAZ,SAAd;;AACA,YAAMkB,OAAO,GAAGD,GAAG,CAACC,OAAJ,IAAc,eAA9B;AACAC,QAAAA,OAAO,CAACC,KAAR,CAAcF,OAAd;AACH,OAPD;AAQH;AA7BL;AAAA;AAAA,6BAgCa;AAAA,UACGlB,QADH,GACgB,KAAKD,KADrB,CACGC,QADH;AAEL,aACI,mBAEI,MAAC,UAAD,EAAgB,KAAKF,KAAL,CAAWuB,IAA3B,EACI,MAAC,QAAD;AAAU,QAAA,cAAc,EAAC,gBAAzB;AAA0C,QAAA,SAAS,EAAC;AAApD,SAEI,MAAC,QAAD;AAAU,QAAA,IAAI,EAAE,KAAK3B,QAArB;AAA+B,QAAA,QAAQ,EAAEM;AAAzC,QAFJ,CADJ,CAFJ,CADJ;AAWH;AA7CL;;AAAA;AAAA,EAAgCd,SAAhC;AAgDA,eAAeI,QAAQ,CAAC,WAAD,CAAR,CAAsBO,UAAtB,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport Header from '../components/common/Header/Header'\r\nimport BaseLayout from '../components/layouts/BaseLayout'\r\nimport BasePage from '../components/common/BasePage/BasePage'\r\n\r\nimport withAuth from '../components/hoc/withAuth'\r\nimport SlateEditor from '../components/slate-editor/Editor'\r\nimport DynamicEditor from  '../components/slate-editor/DynamicEditor'\r\nimport RichText from '../components/slate-editor/RichText'\r\nimport {saveBlog, createBlog} from '../actions'\r\n\r\nimport { Router } from '../routes'\r\n\r\nexport class BlogEditor extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            isSaving: false,\r\n            lockId: Math.floor(1000 + Math.random() * 9000)\r\n        }\r\n        this.saveBlog = this.saveBlog.bind(this)\r\n    }\r\n\r\n    saveBlog(heading, story) {\r\n        const { lockId } = this.state\r\n        const blog = {}\r\n        blog.title = heading.title\r\n        blog.subTitle = heading.subtitle\r\n        blog.story = story\r\n\r\n        this.setState({ isSaving: true })\r\n\r\n        createBlog(blog, lockId).then( createdBlog => {\r\n            this.setState({ isSaving: false })\r\n            Router.pushRoute(`/blogs/${createdBlog._id}/edit`)\r\n        }).catch(err => {\r\n            this.setState({ isSaving: false })\r\n            const message = err.message|| 'Server Error!'\r\n            console.error(message)\r\n        })\r\n    }\r\n    \r\n\r\n    render() {\r\n        const { isSaving } = this.state\r\n        return (\r\n            <div>\r\n            {/* we destructured auth props using this notation and passed it as a props to BaseLayout */}\r\n                <BaseLayout {...this.props.auth}>\r\n                    <BasePage containerClass=\"editor-wrapper\" className=\"blog-editor-page\">\r\n                        {/* <SlateEditor /> */}\r\n                        <RichText save={this.saveBlog} isSaving={isSaving}/>\r\n                    </BasePage>\r\n                </BaseLayout>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withAuth('siteOwner')(BlogEditor)\r\n"]},"metadata":{},"sourceType":"module"}